<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cypher Controls Estimate</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #0f172a; /* Cypher Dark Blue/Black */
            --accent: #0ea5e9; /* Cyber Blue */
            --bg: #f8fafc;
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #333; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        
        /* Header Branding */
        .header { display: flex; justify-content: space-between; border-bottom: 4px solid var(--primary); padding-bottom: 20px; margin-bottom: 30px; }
        .brand h1 { margin: 0; font-size: 2.5rem; letter-spacing: -1px; color: var(--primary); text-transform: uppercase; }
        .brand span { color: var(--accent); }
        .sub-brand { font-size: 0.9rem; color: #64748b; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; }
        
        /* Inputs (Hidden on Print) */
        .controls { background: #f1f5f9; padding: 20px; margin-bottom: 30px; border-radius: 8px; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
        .input-group label { display: block; font-size: 0.8rem; font-weight: bold; margin-bottom: 5px; color: #64748b; }
        .input-group input { width: 100%; padding: 8px; border: 1px solid #cbd5e1; border-radius: 4px; }
        
        /* Buttons */
        .btn { padding: 10px; font-weight: bold; cursor: pointer; text-align: center; text-decoration: none; border-radius: 4px; display: inline-block; border: none; font-size: 0.9rem; }
        .btn-print { background: var(--accent); color: white; width: 100%; }
        .btn-print:hover { background: #0284c7; }
        .btn-link { background: #e2e8f0; color: #475569; width: 100%; }
        .btn-link:hover { background: #cbd5e1; }

        /* Quote Table */
        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
        th { text-align: left; background: var(--primary); color: white; padding: 12px; font-size: 0.9rem; text-transform: uppercase; }
        td { padding: 12px; border-bottom: 1px solid #e2e8f0; }
        .total-row td { border-top: 2px solid var(--primary); font-weight: bold; font-size: 1.1rem; }
        
        .footer { text-align: center; font-size: 0.8rem; color: #94a3b8; margin-top: 50px; }
        
        @media print {
            body { background: white; padding: 0; }
            .container { box-shadow: none; padding: 0; }
            .controls, .no-print { display: none !important; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="brand">
            <h1>Cypher<span>.</span></h1>
            <div class="sub-brand">Intelligent Building Automation</div>
        </div>
        <div style="text-align: right;">
            <div><strong>Estimate #1042</strong></div>
            <div>Date: <span id="dateDisplay"></span></div>
        </div>
    </div>

    <div class="controls">
        <div class="input-group">
            <label>Cypher Core Price ($)</label>
            <input type="number" id="corePrice" value="1200" oninput="calc()">
        </div>
        <div class="input-group">
            <label>Cypher OS License ($)</label>
            <input type="number" id="osPrice" value="1500" oninput="calc()">
        </div>
        <div class="input-group">
            <label>Number of Units/Zones</label>
            <input type="number" id="units" value="5" oninput="calc()">
        </div>
        <div class="input-group">
            <label>Install Labor (Hours)</label>
            <input type="number" id="laborHours" value="20" oninput="calc()">
        </div>
        <div class="input-group">
            <label>Labor Rate ($/hr)</label>
            <input type="number" id="rate" value="145" oninput="calc()">
        </div>
        
        <!-- Action Buttons -->
        <div style="grid-column: span 3; display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-top: 10px;">
            <button onclick="window.print()" class="btn btn-print"><i class="fa-solid fa-print"></i> PRINT PROPOSAL</button>
            <a href="BASStrategy.html" class="btn btn-link"><i class="fa-solid fa-arrow-left"></i> STRATEGY GUIDE</a>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th style="width: 100px; text-align: center;">Qty</th>
                <th style="text-align: right;">Line Total</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <strong>Cypher Core X1 Controller</strong><br>
                    <small>Primary logic controller, web server, and database host.</small>
                </td>
                <td style="text-align: center;">1</td>
                <td style="text-align: right;" id="outCore">$1,200.00</td>
            </tr>
            <tr>
                <td>
                    <strong>Cypher OS Site License</strong><br>
                    <small>Unlimited points license, user interface, and local history database.</small>
                </td>
                <td style="text-align: center;">1</td>
                <td style="text-align: right;" id="outOS">$1,500.00</td>
            </tr>
            <tr>
                <td>
                    <strong>Cypher I/O Expansion & Sensors</strong><br>
                    <small>Interface cards and sensors for <span id="outUnitsCount">5</span> zones.</small>
                </td>
                <td style="text-align: center;">1</td>
                <td style="text-align: right;" id="outIO">$500.00</td>
            </tr>
            <tr>
                <td>
                    <strong>Engineering & Installation</strong><br>
                    <small>Panel fabrication, programming, mounting, and commissioning.</small>
                </td>
                <td style="text-align: center;" id="outHours">20 hrs</td>
                <td style="text-align: right;" id="outLabor">$2,900.00</td>
            </tr>
            <tr class="total-row">
                <td colspan="2" style="text-align: right;">PROJECT TOTAL</td>
                <td style="text-align: right;" id="outTotal">$6,100.00</td>
            </tr>
        </tbody>
    </table>

    <div style="background: #f8fafc; padding: 20px; border-left: 4px solid var(--accent);">
        <strong>Annual Software Maintenance (SMA):</strong> Includes remote tunneling, security patches, and database optimization.
        <div style="float: right; font-weight: bold;">$600.00 / yr</div>
    </div>

    <div class="footer">
        Valid for 30 days. Proprietary technology of Cypher Automation.
    </div>
</div>

<script>
    document.getElementById('dateDisplay').innerText = new Date().toLocaleDateString();

    function calc() {
        const core = parseFloat(document.getElementById('corePrice').value) || 0;
        const os = parseFloat(document.getElementById('osPrice').value) || 0;
        const units = parseFloat(document.getElementById('units').value) || 0;
        const labor = parseFloat(document.getElementById('laborHours').value) || 0;
        const rate = parseFloat(document.getElementById('rate').value) || 0;

        // Approx IO cost logic for estimate
        const ioCost = units * 150; 

        document.getElementById('outCore').innerText = "$" + core.toLocaleString(undefined, {minimumFractionDigits: 2});
        document.getElementById('outOS').innerText = "$" + os.toLocaleString(undefined, {minimumFractionDigits: 2});
        document.getElementById('outUnitsCount').innerText = units;
        document.getElementById('outIO').innerText = "$" + ioCost.toLocaleString(undefined, {minimumFractionDigits: 2});
        document.getElementById('outHours').innerText = labor + " hrs";
        
        const laborTotal = labor * rate;
        document.getElementById('outLabor').innerText = "$" + laborTotal.toLocaleString(undefined, {minimumFractionDigits: 2});
        
        const total = core + os + ioCost + laborTotal;
        document.getElementById('outTotal').innerText = "$" + total.toLocaleString(undefined, {minimumFractionDigits: 2});
    }
    calc();
</script>

</body>
</html>
